import { Currency, ETHER, Token } from '@padswap/sdk'
import React, { useMemo } from 'react'
import styled from 'styled-components'
import useHttpLocations from '../../hooks/useHttpLocations'
import { WrappedTokenInfo } from '../../state/lists/hooks'
import Logo from '../Logo'
import CoinLogo from '../pancake/CoinLogo'

const getTokenLogoURL = (address: string) =>
  `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/smartchain/assets/${address}/logo.png`

const StyledBnbLogo = styled.img<{ size: string }>`
  width: ${({ size }) => size};
  height: ${({ size }) => size};
  box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.075);
  border-radius: 24px;
`

const StyledLogo = styled(Logo)<{ size: string }>`
  width: ${({ size }) => size};
  height: ${({ size }) => size};
`

export default function CurrencyLogo({
  currency,
  size = '24px',
  style,
}: {
  currency?: Currency
  size?: string
  style?: React.CSSProperties
}) {
  const uriLocations = useHttpLocations(currency instanceof WrappedTokenInfo ? currency.logoURI : undefined)

  const srcs: string[] = useMemo(() => {
    if (currency === ETHER) return []

    if (currency instanceof Token) {
      if (currency instanceof WrappedTokenInfo) {
        return [...uriLocations, `/images/coins/${currency?.address ?? 'token'}.png`, getTokenLogoURL(currency.address)]
      }

      return [`/images/coins/${currency?.address ?? 'token'}.png`, getTokenLogoURL(currency.address)]
    }
    return []
  }, [currency, uriLocations])

  if (currency === ETHER) {
    return <StyledBnbLogo src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAbXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjadYzRDYAwCET/mcIRrhShjOOHJt3A8aWVRP3wJcBxhKP97ActExOS1Zq6KgJxcd5CNNwwUBgFNXRJL6d6M8izEyu+8KhI89eT5K3++CNotgusWSAjUN9PXwAACgZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4KIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIgogICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIxMDAiCiAgIGV4aWY6UGl4ZWxZRGltZW5zaW9uPSIxMDAiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMTAwIgogICB0aWZmOkltYWdlSGVpZ2h0PSIxMDAiCiAgIHRpZmY6T3JpZW50YXRpb249IjEiLz4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pl/OssoAAAAEc0JJVAgICAh8CGSIAAAFD0lEQVR42u3db6hlZRXH8c89M86IU5POHAx1bE+pU4qDvrl6BROKqQg11CMk6EzqCxUyCVIJjop/2kZ/fJEEQlgRJYhwoRK1F5aalGc8atJg1mDEmZxJZTM6OjM6jt7ji/0MXiXM25x7Zu991xfui/vA5Xme89trPWuvZ511CYIgCIIgCIIgCIIgCIIgCIIgaDYTTdtQp9+DZTgaq7AcLbyF7diCbXhzenIqBJknEZbji+nnNKzBkg/4k1fxDB7FfXhsenJqbwiyfyJMpA//6/hKsor/Zz/DZDG/wh0YHEjLmaihEDCJW/H55I5Gxev4BW6enpz6Twjyv8U4FD/AJVg0j1PtwHW4Y3py6u0Q5L+LcSruwjFjmnKI3+GS6cmpF0OQ97qoDcm/H3IAljDA2dOTU5vGMVmrBmJciZ8fIDEgw0Odfm9qQVtIEuMK/Hiez4sPy3asm56c+stCtZAv4UcVEQNW4Dedfu/IBWchnX5vNZ7Aygou74/JUvYuCAvp9Hst3FlRMeCz+NZCclkb0gtfVZnA9Z1+77jGu6xOv/dRPIujavBqNI3zR51mqZqFXF4TMeBcnNRYl9Xp9xbjKvWhhW82+Qz5svIOo06c3+n3VjZVkAvUj4/grMYJ0un3luIL6snZTbSQtWjXVJAzOv3eoqYJcor63l6uxCebJsjx6ksLJzRNkGPUm9VNE2RFzQVZ2TRBltdckGVNE2RrjcUYYmQVKosrsqmvKmusWjUU5HU8LAiCYOExb2/Hg3YXTsbheDAr8pk0foTyRnBRgz/Xnbg/K/I3qnSor8VGHKS8N7h90O4uURYJHNvwB32InyjLmCoT9n48iTGBfaUzByWLWQieZ1XVwt7f42rllez3ISvyXYN294IU5rYaLMgu3BYnYhAEEfa+J5Q9Ctfgr/hZVuRS5HQtPlWD/W7GD7Mif6uqC5zrof5drMcMevhbOqBvqVE4+nf8uqoLnGuksy1tajdeSWNbk0B14G28UOUFztVCrsef8FxW5NvS2B9wuhHems0j/8TjcVIFwYKIsuZKSjDKivz94xPq30ViiOH791ZZQQbt7jLcrUydfC0r8k1JoJtwsfqnTobKm8JLRxlGz2cua513614vwzfwMXzbB/chqRPrld+DfLIOgmxUfse7jQfS2Ku4F+doRuObp9N7TW3OkIOxNCvyHbPGWsoUfBMEKbIi3ysIgqqHvSliWoWXsiJ/c9Z4G4eNON3xr6zIh7PmWIJP1MDt7cK2uYTG+yPIjbgBm3BKVuR7Bu3u55QddEYdRf0SG1J2+WBlYvOkGjzwM7g8K/I7P+wf7M+7wLok6InK+3PK6sP5CGnPmPXwHJ7mrAMtZaOBsYS9N+JmZXJxSxr7KU5N7mRU7MX3ZrmsLWnu82rgsnZI9QRBEAQR9laPQbt7mrIS8p6syPeksdU40/yXqw7xcFbkI2v/t7jmYqzBQ1iKz6CbUvsPpN/HwfZBu7s6K/LXRhWW1ZlDlOWplJnkfVa/bIxrWDrKB3txzQV5Ghfi07gdsiKfGbS7Z+KiMexvBr/NivzlOP2CIIiw94BESkcr79n/oUyR7Mvm3mI8HR524ztZkW+ugiBVONRvUDbXH+IRZSb3HGUN8bgemCUq0q+rCmHv5iTGTu82EHgOe8Y0/1D5z12EhZTchsfwfFbk/06h61ODdvdE4+kS9DL+HKdXEARBEARBEARBEARBEARBEATBeHgHNCE4Q2pJM/8AAAAASUVORK5CYII=" size={size} style={style} />
  }

  return (currency as any)?.symbol ? (
    <CoinLogo size={size} srcs={srcs} alt={`${currency?.symbol ?? 'token'} logo`} style={style} />
  ) : (
    <StyledLogo size={size} srcs={srcs} alt={`${currency?.symbol ?? 'token'} logo`} style={style} />
  )
}
